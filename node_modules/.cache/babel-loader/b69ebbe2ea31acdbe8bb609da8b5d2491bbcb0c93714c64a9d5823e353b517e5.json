{"ast":null,"code":"import { createMachine, assign } from 'xstate';\nconst machine = createMachine({\n  id: 'player',\n  initial: 'mini',\n  context: {\n    videoRef: null,\n    isModalVisible: false\n  },\n  states: {\n    modalClosed: {\n      on: {\n        OPEN_MODAL: {\n          target: 'mini',\n          actions: assign({\n            isModalVisible: true\n          })\n        }\n      }\n    },\n    mini: {\n      on: {\n        toggle: 'full',\n        PLAY: 'playing',\n        RESIZE: {\n          actions: 'resizeVideo',\n          target: 'full'\n        },\n        CLOSE_MODAL: {\n          target: 'modalClosed',\n          actions: assign({\n            isModalVisible: false\n          })\n        }\n      }\n    },\n    full: {\n      entry: 'playVideo',\n      exit: 'pauseVideo',\n      on: {\n        toggle: 'mini',\n        PAUSE: 'paused',\n        PLAY: 'playing',\n        RESIZE: {\n          actions: 'resizeVideo',\n          target: 'mini'\n        },\n        CLOSE_MODAL: {\n          target: 'modalClosed',\n          actions: assign({\n            isModalVisible: false\n          })\n        }\n      }\n    },\n    playing: {\n      entry: 'playVideo',\n      on: {\n        PAUSE: 'paused',\n        END: 'mini',\n        RESIZE: {\n          actions: 'resizeVideo'\n        },\n        CLOSE_MODAL: {\n          target: 'modalClosed',\n          actions: assign({\n            isModalVisible: false\n          })\n        }\n      }\n    },\n    paused: {\n      exit: 'pauseVideo',\n      on: {\n        PLAY: 'playing',\n        RESIZE: {\n          actions: 'resizeVideo'\n        },\n        CLOSE_MODAL: {\n          target: 'modalClosed',\n          actions: assign({\n            isModalVisible: false\n          })\n        }\n      }\n    }\n  }\n}, {\n  actions: {\n    playVideo: context => {\n      var _context$videoRef;\n      if ((_context$videoRef = context.videoRef) !== null && _context$videoRef !== void 0 && _context$videoRef.current) {\n        context.videoRef.current.getInternalPlayer().play();\n      }\n    },\n    pauseVideo: context => {\n      var _context$videoRef2;\n      if ((_context$videoRef2 = context.videoRef) !== null && _context$videoRef2 !== void 0 && _context$videoRef2.current) {\n        context.videoRef.current.getInternalPlayer().pause();\n      }\n    },\n    resizeVideo: context => {\n      // Действие по изменению размера видео\n      console.log('Resizing video');\n    }\n  }\n});\nexport default machine;","map":{"version":3,"names":["createMachine","assign","machine","id","initial","context","videoRef","isModalVisible","states","modalClosed","on","OPEN_MODAL","target","actions","mini","toggle","PLAY","RESIZE","CLOSE_MODAL","full","entry","exit","PAUSE","playing","END","paused","playVideo","_context$videoRef","current","getInternalPlayer","play","pauseVideo","_context$videoRef2","pause","resizeVideo","console","log"],"sources":["/Users/evgeniy/react-player/src/machine.js"],"sourcesContent":["import { createMachine, assign } from 'xstate';\n\nconst machine = createMachine(\n  {\n    id: 'player',\n    initial: 'mini',\n    context: {\n      videoRef: null,\n      isModalVisible: false,\n    },\n    states: {\n      modalClosed: {\n        on: {\n          OPEN_MODAL: {\n            target: 'mini',\n            actions: assign({ isModalVisible: true }),\n          },\n        },\n      },\n      mini: {\n        on: {\n          toggle: 'full',\n          PLAY: 'playing',\n          RESIZE: {\n            actions: 'resizeVideo',\n            target: 'full',\n          },\n          CLOSE_MODAL: {\n            target: 'modalClosed',\n            actions: assign({ isModalVisible: false }),\n          },\n        },\n      },\n      full: {\n        entry: 'playVideo',\n        exit: 'pauseVideo',\n        on: {\n          toggle: 'mini',\n          PAUSE: 'paused',\n          PLAY: 'playing',\n          RESIZE: {\n            actions: 'resizeVideo',\n            target: 'mini',\n          },\n          CLOSE_MODAL: {\n            target: 'modalClosed',\n            actions: assign({ isModalVisible: false }),\n          },\n        },\n      },\n      playing: {\n        entry: 'playVideo',\n        on: {\n          PAUSE: 'paused',\n          END: 'mini',\n          RESIZE: {\n            actions: 'resizeVideo',\n          },\n          CLOSE_MODAL: {\n            target: 'modalClosed',\n            actions: assign({ isModalVisible: false }),\n          },\n        },\n      },\n      paused: {\n        exit: 'pauseVideo',\n        on: {\n          PLAY: 'playing',\n          RESIZE: {\n            actions: 'resizeVideo',\n          },\n          CLOSE_MODAL: {\n            target: 'modalClosed',\n            actions: assign({ isModalVisible: false }),\n          },\n        },\n      },\n    },\n  },\n  {\n    actions: {\n      playVideo: (context) => {\n        if (context.videoRef?.current) {\n          context.videoRef.current.getInternalPlayer().play();\n        }\n      },\n      pauseVideo: (context) => {\n        if (context.videoRef?.current) {\n          context.videoRef.current.getInternalPlayer().pause();\n        }\n      },\n      resizeVideo: (context) => {\n        // Действие по изменению размера видео\n        console.log('Resizing video');\n      },\n    },\n  }\n);\n\nexport default machine;\n"],"mappings":"AAAA,SAASA,aAAa,EAAEC,MAAM,QAAQ,QAAQ;AAE9C,MAAMC,OAAO,GAAGF,aAAa,CAC3B;EACEG,EAAE,EAAE,QAAQ;EACZC,OAAO,EAAE,MAAM;EACfC,OAAO,EAAE;IACPC,QAAQ,EAAE,IAAI;IACdC,cAAc,EAAE;EAClB,CAAC;EACDC,MAAM,EAAE;IACNC,WAAW,EAAE;MACXC,EAAE,EAAE;QACFC,UAAU,EAAE;UACVC,MAAM,EAAE,MAAM;UACdC,OAAO,EAAEZ,MAAM,CAAC;YAAEM,cAAc,EAAE;UAAK,CAAC;QAC1C;MACF;IACF,CAAC;IACDO,IAAI,EAAE;MACJJ,EAAE,EAAE;QACFK,MAAM,EAAE,MAAM;QACdC,IAAI,EAAE,SAAS;QACfC,MAAM,EAAE;UACNJ,OAAO,EAAE,aAAa;UACtBD,MAAM,EAAE;QACV,CAAC;QACDM,WAAW,EAAE;UACXN,MAAM,EAAE,aAAa;UACrBC,OAAO,EAAEZ,MAAM,CAAC;YAAEM,cAAc,EAAE;UAAM,CAAC;QAC3C;MACF;IACF,CAAC;IACDY,IAAI,EAAE;MACJC,KAAK,EAAE,WAAW;MAClBC,IAAI,EAAE,YAAY;MAClBX,EAAE,EAAE;QACFK,MAAM,EAAE,MAAM;QACdO,KAAK,EAAE,QAAQ;QACfN,IAAI,EAAE,SAAS;QACfC,MAAM,EAAE;UACNJ,OAAO,EAAE,aAAa;UACtBD,MAAM,EAAE;QACV,CAAC;QACDM,WAAW,EAAE;UACXN,MAAM,EAAE,aAAa;UACrBC,OAAO,EAAEZ,MAAM,CAAC;YAAEM,cAAc,EAAE;UAAM,CAAC;QAC3C;MACF;IACF,CAAC;IACDgB,OAAO,EAAE;MACPH,KAAK,EAAE,WAAW;MAClBV,EAAE,EAAE;QACFY,KAAK,EAAE,QAAQ;QACfE,GAAG,EAAE,MAAM;QACXP,MAAM,EAAE;UACNJ,OAAO,EAAE;QACX,CAAC;QACDK,WAAW,EAAE;UACXN,MAAM,EAAE,aAAa;UACrBC,OAAO,EAAEZ,MAAM,CAAC;YAAEM,cAAc,EAAE;UAAM,CAAC;QAC3C;MACF;IACF,CAAC;IACDkB,MAAM,EAAE;MACNJ,IAAI,EAAE,YAAY;MAClBX,EAAE,EAAE;QACFM,IAAI,EAAE,SAAS;QACfC,MAAM,EAAE;UACNJ,OAAO,EAAE;QACX,CAAC;QACDK,WAAW,EAAE;UACXN,MAAM,EAAE,aAAa;UACrBC,OAAO,EAAEZ,MAAM,CAAC;YAAEM,cAAc,EAAE;UAAM,CAAC;QAC3C;MACF;IACF;EACF;AACF,CAAC,EACD;EACEM,OAAO,EAAE;IACPa,SAAS,EAAGrB,OAAO,IAAK;MAAA,IAAAsB,iBAAA;MACtB,KAAAA,iBAAA,GAAItB,OAAO,CAACC,QAAQ,cAAAqB,iBAAA,eAAhBA,iBAAA,CAAkBC,OAAO,EAAE;QAC7BvB,OAAO,CAACC,QAAQ,CAACsB,OAAO,CAACC,iBAAiB,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC;MACrD;IACF,CAAC;IACDC,UAAU,EAAG1B,OAAO,IAAK;MAAA,IAAA2B,kBAAA;MACvB,KAAAA,kBAAA,GAAI3B,OAAO,CAACC,QAAQ,cAAA0B,kBAAA,eAAhBA,kBAAA,CAAkBJ,OAAO,EAAE;QAC7BvB,OAAO,CAACC,QAAQ,CAACsB,OAAO,CAACC,iBAAiB,CAAC,CAAC,CAACI,KAAK,CAAC,CAAC;MACtD;IACF,CAAC;IACDC,WAAW,EAAG7B,OAAO,IAAK;MACxB;MACA8B,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;IAC/B;EACF;AACF,CACF,CAAC;AAED,eAAelC,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}