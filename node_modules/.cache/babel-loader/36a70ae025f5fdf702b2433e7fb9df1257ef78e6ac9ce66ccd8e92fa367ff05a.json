{"ast":null,"code":"import{useState,useRef,useEffect}from'react';import{useMachine}from'@xstate/react';import{Modal,Button}from'antd';import ReactPlayer from'react-player';import machine from'./machine';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{const videoRef=useRef(null);const[state,send]=useMachine(machine,{context:{videoRef}});const[isModalVisible,setIsModalVisible]=useState(false);const[videoWidth,setVideoWidth]=useState('452px');const[videoHeight,setVideoHeight]=useState('254px');const openModal=()=>{setIsModalVisible(true);};const handlePlayPause=()=>{send({type:state.matches('playing')?'PAUSE':'PLAY'});};const handleResize=()=>{if(videoWidth==='452px'){setVideoWidth('1000px');setVideoHeight('700px');send({type:'RESIZE'});}else{setVideoWidth('452px');setVideoHeight('254px');send({type:'RESIZE'});}};const handleEnded=()=>{send({type:'END'});setTimeout(()=>{send({type:'PLAY'});},100);};useEffect(()=>{if(isModalVisible){send({type:'PLAY'});}else{send({type:'PAUSE'});}},[isModalVisible,send]);useEffect(()=>{console.log('Current state:',state.value);},[state]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{type:\"primary\",onClick:openModal,children:\"Open Video Player\"}),/*#__PURE__*/_jsxs(Modal,{title:\"PLAYER\",open:isModalVisible,onCancel:()=>{setIsModalVisible(false);send({type:'PAUSE'});},footer:null,width:videoWidth,height:videoHeight,children:[/*#__PURE__*/_jsx(ReactPlayer,{ref:videoRef,url:\"https://cdn.flowplayer.com/d9cd469f-14fc-4b7b-a7f6-ccbfa755dcb8/hls/383f752a-cbd1-4691-a73f-a4e583391b3d/playlist.m3u8\",playing:state.matches('playing'),muted:true,width:\"100%\",height:\"100%\",onEnded:handleEnded}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'10px',display:'flex',justifyContent:'flex-end'},children:[/*#__PURE__*/_jsx(Button,{onClick:handleResize,children:videoWidth==='452px'?'Expand Video':'Shrink Video'}),/*#__PURE__*/_jsx(Button,{onClick:handlePlayPause,children:state.matches('playing')?'Pause':'Play'})]})]})]});};export default App;","map":{"version":3,"names":["useState","useRef","useEffect","useMachine","Modal","Button","ReactPlayer","machine","jsx","_jsx","jsxs","_jsxs","App","videoRef","state","send","context","isModalVisible","setIsModalVisible","videoWidth","setVideoWidth","videoHeight","setVideoHeight","openModal","handlePlayPause","type","matches","handleResize","handleEnded","setTimeout","console","log","value","children","onClick","title","open","onCancel","footer","width","height","ref","url","playing","muted","onEnded","style","marginTop","display","justifyContent"],"sources":["/Users/evgeniy/react-player/src/App.js"],"sourcesContent":["import { useState, useRef, useEffect } from 'react';\nimport { useMachine } from '@xstate/react';\nimport { Modal, Button } from 'antd';\nimport ReactPlayer from 'react-player';\nimport machine from './machine';\n\nconst App = () => {\n  const videoRef = useRef(null);\n  const [state, send] = useMachine(machine, {\n    context: {\n      videoRef,\n    },\n  });\n  const [isModalVisible, setIsModalVisible] = useState(false);\n  const [videoWidth, setVideoWidth] = useState('452px');\n  const [videoHeight, setVideoHeight] = useState('254px');\n\n  const openModal = () => {\n    setIsModalVisible(true);\n  };\n\n  const handlePlayPause = () => {\n    send({ type: state.matches('playing') ? 'PAUSE' : 'PLAY' });\n  };\n\n  const handleResize = () => {\n    if (videoWidth === '452px') {\n      setVideoWidth('1000px');\n      setVideoHeight('700px');\n      send({ type: 'RESIZE' });\n    } else {\n      setVideoWidth('452px');\n      setVideoHeight('254px');\n      send({ type: 'RESIZE' });\n    }\n  };\n\n  const handleEnded = () => {\n    send({ type: 'END' });\n    setTimeout(() => {\n      send({ type: 'PLAY' });\n    }, 100);\n  };\n\n  useEffect(() => {\n    if (isModalVisible) {\n      send({ type: 'PLAY' });\n    } else {\n      send({ type: 'PAUSE' });\n    }\n  }, [isModalVisible, send]);\n\n  useEffect(() => {\n    console.log('Current state:', state.value);\n  }, [state]);\n\n  return (\n    <div>\n      <Button\n        type=\"primary\"\n        onClick={openModal}\n      >\n        Open Video Player\n      </Button>\n\n      <Modal\n        title=\"PLAYER\"\n        open={isModalVisible}\n        onCancel={() => {\n          setIsModalVisible(false);\n          send({ type: 'PAUSE' });\n        }}\n        footer={null}\n        width={videoWidth}\n        height={videoHeight}\n      >\n        <ReactPlayer\n          ref={videoRef}\n          url=\"https://cdn.flowplayer.com/d9cd469f-14fc-4b7b-a7f6-ccbfa755dcb8/hls/383f752a-cbd1-4691-a73f-a4e583391b3d/playlist.m3u8\"\n          playing={state.matches('playing')}\n          muted={true}\n          width=\"100%\"\n          height=\"100%\"\n          onEnded={handleEnded}\n        />\n        <div\n          style={{\n            marginTop: '10px',\n            display: 'flex',\n            justifyContent: 'flex-end',\n          }}\n        >\n          <Button onClick={handleResize}>\n            {videoWidth === '452px'\n              ? 'Expand Video'\n              : 'Shrink Video'}\n          </Button>\n          <Button onClick={handlePlayPause}>\n            {state.matches('playing') ? 'Pause' : 'Play'}\n          </Button>\n        </div>\n      </Modal>\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}