{"ast":null,"code":"import { createMachine } from 'xstate';\nconst machine = createMachine({\n  id: 'player',\n  initial: 'mini',\n  context: {\n    videoRef: null,\n    isModalVisible: false\n  },\n  states: {\n    modalClosed: {\n      on: {\n        OPEN_MODAL: {\n          target: 'mini',\n          actions: assign({\n            isModalVisible: true\n          })\n        }\n      }\n    },\n    mini: {\n      on: {\n        toggle: 'full',\n        PLAY: 'playing',\n        RESIZE: {\n          actions: 'resizeVideo',\n          target: 'full',\n          CLOSE_MODAL: {\n            target: 'modalClosed',\n            actions: assign({\n              isModalVisible: false\n            })\n          }\n        }\n      }\n    },\n    full: {\n      entry: 'playVideo',\n      exit: 'pauseVideo',\n      on: {\n        toggle: 'mini',\n        PAUSE: 'paused',\n        PLAY: 'playing',\n        RESIZE: {\n          actions: 'resizeVideo',\n          target: 'mini'\n        }\n      }\n    },\n    playing: {\n      entry: 'playVideo',\n      on: {\n        PAUSE: 'paused',\n        END: 'mini',\n        RESIZE: {\n          actions: 'resizeVideo'\n        }\n      }\n    },\n    paused: {\n      exit: 'pauseVideo',\n      on: {\n        PLAY: 'playing',\n        RESIZE: {\n          actions: 'resizeVideo'\n        }\n      }\n    }\n  }\n}, {\n  actions: {\n    playVideo: context => {\n      var _context$videoRef;\n      if ((_context$videoRef = context.videoRef) !== null && _context$videoRef !== void 0 && _context$videoRef.current) {\n        context.videoRef.current.getInternalPlayer().play();\n      }\n    },\n    pauseVideo: context => {\n      var _context$videoRef2;\n      if ((_context$videoRef2 = context.videoRef) !== null && _context$videoRef2 !== void 0 && _context$videoRef2.current) {\n        context.videoRef.current.getInternalPlayer().pause();\n      }\n    }\n  }\n});\nexport default machine;","map":{"version":3,"names":["createMachine","machine","id","initial","context","videoRef","isModalVisible","states","modalClosed","on","OPEN_MODAL","target","actions","assign","mini","toggle","PLAY","RESIZE","CLOSE_MODAL","full","entry","exit","PAUSE","playing","END","paused","playVideo","_context$videoRef","current","getInternalPlayer","play","pauseVideo","_context$videoRef2","pause"],"sources":["/Users/evgeniy/react-player/src/machine.js"],"sourcesContent":["import { createMachine } from 'xstate';\n\nconst machine = createMachine(\n  {\n    id: 'player',\n    initial: 'mini',\n    context: {\n      videoRef: null,\n      isModalVisible: false,\n    },\n    states: {\n      modalClosed: {\n        on: {\n          OPEN_MODAL: {\n            target: 'mini',\n            actions: assign({ isModalVisible: true }),\n          },\n        },\n      },\n      mini: {\n        on: {\n          toggle: 'full',\n          PLAY: 'playing',\n          RESIZE: {\n            actions: 'resizeVideo',\n            target: 'full',\n            CLOSE_MODAL: {\n              target: 'modalClosed',\n              actions: assign({ isModalVisible: false }),\n            },\n          },\n        },\n      },\n      full: {\n        entry: 'playVideo',\n        exit: 'pauseVideo',\n        on: {\n          toggle: 'mini',\n          PAUSE: 'paused',\n          PLAY: 'playing',\n          RESIZE: {\n            actions: 'resizeVideo',\n            target: 'mini',\n          },\n        },\n      },\n      playing: {\n        entry: 'playVideo',\n        on: {\n          PAUSE: 'paused',\n          END: 'mini',\n          RESIZE: {\n            actions: 'resizeVideo',\n          },\n        },\n      },\n      paused: {\n        exit: 'pauseVideo',\n        on: {\n          PLAY: 'playing',\n          RESIZE: {\n            actions: 'resizeVideo',\n          },\n        },\n      },\n    },\n  },\n  {\n    actions: {\n      playVideo: (context) => {\n        if (context.videoRef?.current) {\n          context.videoRef.current.getInternalPlayer().play();\n        }\n      },\n      pauseVideo: (context) => {\n        if (context.videoRef?.current) {\n          context.videoRef.current.getInternalPlayer().pause();\n        }\n      },\n    },\n  }\n);\n\nexport default machine;\n"],"mappings":"AAAA,SAASA,aAAa,QAAQ,QAAQ;AAEtC,MAAMC,OAAO,GAAGD,aAAa,CAC3B;EACEE,EAAE,EAAE,QAAQ;EACZC,OAAO,EAAE,MAAM;EACfC,OAAO,EAAE;IACPC,QAAQ,EAAE,IAAI;IACdC,cAAc,EAAE;EAClB,CAAC;EACDC,MAAM,EAAE;IACNC,WAAW,EAAE;MACXC,EAAE,EAAE;QACFC,UAAU,EAAE;UACVC,MAAM,EAAE,MAAM;UACdC,OAAO,EAAEC,MAAM,CAAC;YAAEP,cAAc,EAAE;UAAK,CAAC;QAC1C;MACF;IACF,CAAC;IACDQ,IAAI,EAAE;MACJL,EAAE,EAAE;QACFM,MAAM,EAAE,MAAM;QACdC,IAAI,EAAE,SAAS;QACfC,MAAM,EAAE;UACNL,OAAO,EAAE,aAAa;UACtBD,MAAM,EAAE,MAAM;UACdO,WAAW,EAAE;YACXP,MAAM,EAAE,aAAa;YACrBC,OAAO,EAAEC,MAAM,CAAC;cAAEP,cAAc,EAAE;YAAM,CAAC;UAC3C;QACF;MACF;IACF,CAAC;IACDa,IAAI,EAAE;MACJC,KAAK,EAAE,WAAW;MAClBC,IAAI,EAAE,YAAY;MAClBZ,EAAE,EAAE;QACFM,MAAM,EAAE,MAAM;QACdO,KAAK,EAAE,QAAQ;QACfN,IAAI,EAAE,SAAS;QACfC,MAAM,EAAE;UACNL,OAAO,EAAE,aAAa;UACtBD,MAAM,EAAE;QACV;MACF;IACF,CAAC;IACDY,OAAO,EAAE;MACPH,KAAK,EAAE,WAAW;MAClBX,EAAE,EAAE;QACFa,KAAK,EAAE,QAAQ;QACfE,GAAG,EAAE,MAAM;QACXP,MAAM,EAAE;UACNL,OAAO,EAAE;QACX;MACF;IACF,CAAC;IACDa,MAAM,EAAE;MACNJ,IAAI,EAAE,YAAY;MAClBZ,EAAE,EAAE;QACFO,IAAI,EAAE,SAAS;QACfC,MAAM,EAAE;UACNL,OAAO,EAAE;QACX;MACF;IACF;EACF;AACF,CAAC,EACD;EACEA,OAAO,EAAE;IACPc,SAAS,EAAGtB,OAAO,IAAK;MAAA,IAAAuB,iBAAA;MACtB,KAAAA,iBAAA,GAAIvB,OAAO,CAACC,QAAQ,cAAAsB,iBAAA,eAAhBA,iBAAA,CAAkBC,OAAO,EAAE;QAC7BxB,OAAO,CAACC,QAAQ,CAACuB,OAAO,CAACC,iBAAiB,CAAC,CAAC,CAACC,IAAI,CAAC,CAAC;MACrD;IACF,CAAC;IACDC,UAAU,EAAG3B,OAAO,IAAK;MAAA,IAAA4B,kBAAA;MACvB,KAAAA,kBAAA,GAAI5B,OAAO,CAACC,QAAQ,cAAA2B,kBAAA,eAAhBA,kBAAA,CAAkBJ,OAAO,EAAE;QAC7BxB,OAAO,CAACC,QAAQ,CAACuB,OAAO,CAACC,iBAAiB,CAAC,CAAC,CAACI,KAAK,CAAC,CAAC;MACtD;IACF;EACF;AACF,CACF,CAAC;AAED,eAAehC,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}