{"ast":null,"code":"import { createMachine, assign } from 'xstate';\nconst machine = createMachine({\n  id: 'player',\n  initial: 'modalClosed',\n  context: {\n    videoRef: null,\n    isModalVisible: false\n  },\n  states: {\n    modalClosed: {\n      on: {\n        OPEN_MODAL: {\n          target: 'mini',\n          actions: assign({\n            isModalVisible: true\n          })\n        }\n      }\n    },\n    mini: {\n      entry: 'logState',\n      on: {\n        toggle: 'full',\n        PLAY: 'playing',\n        RESIZE: {\n          actions: 'resizeVideo',\n          target: 'full'\n        },\n        CLOSE_MODAL: {\n          target: 'modalClosed',\n          actions: assign({\n            isModalVisible: false\n          })\n        }\n      }\n    },\n    full: {\n      entry: ['logState', 'playVideo'],\n      exit: 'pauseVideo',\n      on: {\n        toggle: 'mini',\n        PAUSE: 'paused',\n        PLAY: 'playing',\n        RESIZE: {\n          actions: 'resizeVideo',\n          target: 'mini'\n        },\n        CLOSE_MODAL: {\n          target: 'modalClosed',\n          actions: assign({\n            isModalVisible: false\n          })\n        }\n      }\n    },\n    playing: {\n      entry: ['logState', 'playVideo'],\n      on: {\n        PAUSE: 'paused',\n        END: 'mini',\n        RESIZE: {\n          actions: 'resizeVideo'\n        },\n        CLOSE_MODAL: {\n          target: 'modalClosed',\n          actions: assign({\n            isModalVisible: false\n          })\n        }\n      }\n    },\n    paused: {\n      entry: 'logState',\n      exit: 'pauseVideo',\n      on: {\n        PLAY: 'playing',\n        RESIZE: {\n          actions: 'resizeVideo'\n        },\n        CLOSE_MODAL: {\n          target: 'modalClosed',\n          actions: assign({\n            isModalVisible: false\n          })\n        }\n      }\n    }\n  }\n}, {\n  actions: {\n    playVideo: context => {\n      var _context$videoRef;\n      if ((_context$videoRef = context.videoRef) !== null && _context$videoRef !== void 0 && _context$videoRef.current) {\n        context.videoRef.current.getInternalPlayer().play();\n      }\n    },\n    pauseVideo: context => {\n      var _context$videoRef2;\n      if ((_context$videoRef2 = context.videoRef) !== null && _context$videoRef2 !== void 0 && _context$videoRef2.current) {\n        context.videoRef.current.getInternalPlayer().pause();\n      }\n    },\n    resizeVideo: () => console.log('Video resized'),\n    logState: (context, event) => {\n      console.log('Current State:', (event === null || event === void 0 ? void 0 : event.type) || 'No event type');\n      console.log('Modal Visibility:', context.isModalVisible);\n    }\n  }\n});\nexport default machine;","map":{"version":3,"names":["createMachine","assign","machine","id","initial","context","videoRef","isModalVisible","states","modalClosed","on","OPEN_MODAL","target","actions","mini","entry","toggle","PLAY","RESIZE","CLOSE_MODAL","full","exit","PAUSE","playing","END","paused","playVideo","_context$videoRef","current","getInternalPlayer","play","pauseVideo","_context$videoRef2","pause","resizeVideo","console","log","logState","event","type"],"sources":["/Users/evgeniy/react-player/src/machine.js"],"sourcesContent":["import { createMachine, assign } from 'xstate';\n\nconst machine = createMachine(\n  {\n    id: 'player',\n    initial: 'modalClosed',\n    context: {\n      videoRef: null,\n      isModalVisible: false,\n    },\n    states: {\n      modalClosed: {\n        on: {\n          OPEN_MODAL: {\n            target: 'mini',\n            actions: assign({ isModalVisible: true }),\n          },\n        },\n      },\n      mini: {\n        entry: 'logState',\n        on: {\n          toggle: 'full',\n          PLAY: 'playing',\n          RESIZE: {\n            actions: 'resizeVideo',\n            target: 'full',\n          },\n          CLOSE_MODAL: {\n            target: 'modalClosed',\n            actions: assign({ isModalVisible: false }),\n          },\n        },\n      },\n      full: {\n        entry: ['logState', 'playVideo'],\n        exit: 'pauseVideo',\n        on: {\n          toggle: 'mini',\n          PAUSE: 'paused',\n          PLAY: 'playing',\n          RESIZE: {\n            actions: 'resizeVideo',\n            target: 'mini',\n          },\n          CLOSE_MODAL: {\n            target: 'modalClosed',\n            actions: assign({ isModalVisible: false }),\n          },\n        },\n      },\n      playing: {\n        entry: ['logState', 'playVideo'],\n        on: {\n          PAUSE: 'paused',\n          END: 'mini',\n          RESIZE: {\n            actions: 'resizeVideo',\n          },\n          CLOSE_MODAL: {\n            target: 'modalClosed',\n            actions: assign({ isModalVisible: false }),\n          },\n        },\n      },\n      paused: {\n        entry: 'logState',\n        exit: 'pauseVideo',\n        on: {\n          PLAY: 'playing',\n          RESIZE: {\n            actions: 'resizeVideo',\n          },\n          CLOSE_MODAL: {\n            target: 'modalClosed',\n            actions: assign({ isModalVisible: false }),\n          },\n        },\n      },\n    },\n  },\n  {\n    actions: {\n      playVideo: (context) => {\n        if (context.videoRef?.current) {\n          context.videoRef.current.getInternalPlayer().play();\n        }\n      },\n      pauseVideo: (context) => {\n        if (context.videoRef?.current) {\n          context.videoRef.current.getInternalPlayer().pause();\n        }\n      },\n      resizeVideo: () => console.log('Video resized'),\n      logState: (context, event) => {\n        console.log('Current State:', event?.type || 'No event type');\n        console.log('Modal Visibility:', context.isModalVisible);\n      },\n    },\n  }\n);\n\nexport default machine;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}